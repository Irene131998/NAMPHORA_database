---
title: "Plant functional traits metadata"
author: "Irene Solano"
format: html
editor: visual
execute:
  echo: true
  warning: false
  message: false
---

# Description

The **NAMPHORA** database compiles plant functional traits sourced from two trait databases: the **Botanical Information and Ecology Network (BIEN)** and the **TRY Plant Trait Database (TRY)**. Trait data from the **BIEN** database were accessed and processed using the associated **Bien R package (v. 1.2.7)** (Maitner, 2025), with results stored in the `processed_data` folder. In contrast, the **TRY** database does not provide an R package for direct data access, so trait data, specifically for leaf type, were manually extracted from the **TRY website** (Kattge et al., 2020).

The final list of plant functional traits (PFTs) is stored in the `processed_data/plant_functional_types` folder. Metadata information is provided here:

```{r}
#| echo: false
#| output: false
#| message: false
# Load libraries and functions ----
source("functions.R")

library <- c("knitr", "dplyr","readr")

# Install missing packages
invisible(lapply(library, install_if_missing))

# Load the library
lapply(library, require, character.only = TRUE)

```

```{r}
#| echo: false
#| output: false
#| message: false
# Define Attributes

# Define variable names, descriptions, and units for the final CSV
attributes <- data.frame(
  Name = c(
    "pollen_type",
    "mean_log10_whole_plant_height_m",
    "mean_log10_seed_mass_mg",
    "mean_log10_leaf_area_mm2",
    "mean_log10_longest_whole_plant_longevity_years",
    "mean_log10_leaf_dry_mass_g",
    "mean_log10_leaf_life_span_months",
    "mean_log10_leaf_nitrogen_content_per_leaf_dry_mass_mg_g_1",
    "mean_log10_leaf_dry_mass_per_area_g_mm_2",
    "whole_plant_growth_form_diversity",
    "whole_plant_vegetative_phenology",
    "flower_pollination_syndrome",
    "whole_plant_dispersal_syndrome",
    "whole_plant_sexual_system",
    "leaf_type",
    "growth_form_literature",
    "projects_PIs_BIEN",
    paste0("BIEN_url_source_", 1:112),
    paste0("Try_reference_", 1:12)
  ),
  Description = c(
    "Taxonomically harmonised pollen type",
    "Mean of log10-transformed plant height (m)",
    "Mean of log10-transformed seed mass (mg)",
    "Mean of log10-transformed leaf area (mm²)",
    "Mean of log10-transformed plant longevity (years)",
    "Mean of log10-transformed leaf dry mass (g)",
    "Mean of log10-transformed leaf lifespan (months)",
    "Mean of log10-transformed nitrogen content per leaf dry mass (mg/g)",
    "Mean of log10-transformed leaf dry mass per unit area (g/mm²)",
    "Diversity of the whole plant’s growth form",
    "Vegetative phenology of the whole plant",
    "Pollination syndrome of the flowers",
    "Dispersal syndrome of the whole plant",
    "Sexual system of the whole plant",
    "Leaf type (e.g., deciduous, evergreen)",
    "Growth form categories from NAMPHORA habit's categorisation",
    "Principal investigators of BIEN projects",
    rep("URL linking to BIEN data source", 112),
    rep("Reference for trait data from TRY database", 12)
  ),
  Unit = c(
    "Categorical",
    "log10(meters)",
    "log10(milligrams)",
    "log10(mm²)",
    "log10(years)",
    "log10(grams)",
    "log10(months)",
    "log10(mg/g)",
    "log10(g/mm²)",
    "Categorical",
    "Categorical",
    "Categorical",
    "Categorical",
    "Categorical",
    "Categorical",
    "Categorical",
    "Categorical",
    rep("URL", 112),
    rep("Categorical", 12)
  )
)
# Save attributes metadata as CSV
write_csv(attributes, normalizePath("../metadata/plant_functional_types/pfts_metadata.csv"))

```

# Metadata

```{r}
#| echo: false
# Display table in HTML
kable(attributes)
```

# References

1.  Maitner, B. *BIEN: Tools for Accessing the Botanical Information and Ecology Network Database* (Version 1.2.7) \[R package\]. CRAN. <https://doi.org/10.32614/CRAN.package.BIEN> (2025).

2.  Kattge, J., Boenisch, G., Diaz, S., et al. TRY plant trait database - enhanced coverage and open access. *Global Change Biology, 26*, 119–188. <https://doi.org/10.1111/gcb.14904> (2020).
