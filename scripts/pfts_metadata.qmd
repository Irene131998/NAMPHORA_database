---
title: "Plant functional traits metadata"
author: "Irene Solano"
format: html
editor: visual
execute:
  echo: true
  warning: false
  message: false
---

# Description

The **NaAMPHoRA** database compiles plant functional traits sourced from two trait databases: the **Botanical Information and Ecology Network (BIEN)** and the **TRY Plant Trait Database (TRY)**. Trait data from the **BIEN** database were accessed and processed using the associated **Bien R package (v. 1.2.7)** (Maitner, 2025), with results stored in the `processed_data` folder. In contrast, the **TRY** database does not provide an R package for direct data access, so trait data, specifically for leaf type, were manually extracted from the **TRY website** (Kattge et al., 2020).

The final list of plant functional traits (PFTs) is stored in the `processed_data/plant_functional_types` folder. Metadata information is provided here:

```{r}
#| echo: false
#| output: false
#| message: false
# Load libraries and functions ----
source("functions.R")

library <- c("knitr", "dplyr","readr")

# Install missing packages
invisible(lapply(library, install_if_missing))

# Load the library
lapply(library, require, character.only = TRUE)

```

```{r}
#| echo: false
#| output: false
#| message: false
# Define Attributes

# Define variable names, descriptions, and units
attributes <- data.frame(
  Name = c("Pollen_type_SM_morphological", "Family", "Genus", "Taxa", "URL_source", 
           "Project_pi", "Project_pi_contact", "Whole_plant_height_m", "Seed_mass_mg", 
           "Leaf_area_mm2", "Longest_whole_plant_longevity_years", "Plant_flowering_begin_month", 
           "Plant_flowering_begin_date", "Leaf_dry_mass_g", "Leaf_life_span_months", 
           "Leaf_nitrogen_content_per_leaf_dry_mass_mg_g_1", "Whole_plant_dispersal_syndrome", 
           "Whole_plant_vegetative_phenology", "Whole_plant_growth_form_diversity", 
           "Whole_plant_sexual_system", "Flower_pollination_syndrome", 
           "Leaf_dry_mass_per_area_g_mm_2", "Try_dataset", "Leaf_type", "Try_reference"),
  Description = c("Taxonomical harmonised pollen type", "Family of the plant species", 
                  "Genus of the plant species", "Name of the taxon (at species, genus or family level) from which the trait has been retrieved", 
                  "URL linking to the data source", "Principal investigator of the original project in which the trait was measured", 
                  "Contact information for the project PI of the original project in which the trait was measured", "Trait 1: Height of the whole plant in meters", 
                  "Trait 2: Seed mass in milligrams", "Trait 3: Leaf area in square millimeters", 
                  "Trait 4: Longevity of the whole plant in years", "Trait 5: Month when flowering begins", 
                  "Trait 6: Specific date when flowering begins", "Trait 7: Leaf dry mass in grams", 
                  "Trait 8: Leaf lifespan in months", "Trait 9: Leaf nitrogen content per unit of leaf dry mass", 
                  "Trait 10: Dispersal syndrome of the whole plant", 
                  "Trait 11: Vegetative phenology of the whole plant", 
                  "Trait 12: Diversity of the plant’s growth form", "Trait 13: Sexual system of the whole plant", 
                  "Trait 14: Pollination syndrome of the flowers", "Trait 15: Leaf dry mass per unit area", 
                  "Trait 16: Dataset in which the plant is included", "Trait 17: Type of leaf (e.g., deciduous, evergreen)", 
                  "Reference for the type of leaf trait retrieved from TRY database"),
  Unit = c("Categorical", "Categorical", "Categorical", "Categorical", "URL", "Categorical", "Categorical", 
           "Meters", "Milligrams", "Millimeters squared", "Years", "Month", "Date", "Grams", 
           "Months", "Milligrams per gram", "Categorical", "Categorical", "Categorical", "Categorical", 
           "Categorical", "Grams per millimeter squared", "Categorical", "Categorical", "Categorical")
)

# Save attributes metadata as CSV
write_csv(attributes, normalizePath("../metadata/plant_functional_types/pfts_metadata.csv"))

```

# Metadata

```{r}
#| echo: false
# Display table in HTML
kable(attributes)
```

# References

1.  Maitner, B. *BIEN: Tools for Accessing the Botanical Information and Ecology Network Database* (Version 1.2.7) \[R package\]. CRAN. <https://doi.org/10.32614/CRAN.package.BIEN> (2025).

2.  Kattge, J., Boenisch, G., Diaz, S., et al. TRY plant trait database - enhanced coverage and open access. *Global Change Biology, 26*, 119–188. <https://doi.org/10.1111/gcb.14904> (2020).
